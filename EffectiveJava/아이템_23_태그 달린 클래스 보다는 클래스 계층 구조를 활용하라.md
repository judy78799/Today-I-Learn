## 아이템_23_태그 달린 클래스 보다는 클래스 계층 구조를 활용하라

태그 달린 클래스 예시

```java
class Figure {
	enum Shape {RECTANGLE, CIRCLE};
	
	//태그 필드 - 현재 모양을 나타낸다.
	final Shape shape;
	
	//다음 필드들은 모양이 사각형(RECTANGLE)일 때만 쓰인다.
	double length;
	double width;
	
	//다음 필드는 모양이 원일 때만 쓰인다.
	double radius;
	
	//원용 생성자
	Figure(double radius){
		shape = Shape.CIRCLE;
		this.radius = radius;
	}
	
	//사각형 용 생성자
	Figure(double length, double width){
		shape = Shape.RECTANGLE;
		this.length = length;
		this.width = width;
	}
	
	double area(){
		switch(shape){
			case RECTANGLE:
				return length * width;
			case CIRCLE:
				return Math.PI * (radius * radius)
			default:
				throw new AssertionError(shape);
		}
	}
}
```

### 🚨 태그 달린 클래스는 장황하고, 오류를 내기 쉽고, 비효율적이다.

⇒ 클래스 계층 구조를 어설프게 흉내낸 아류일 뿐임.

객체지향언어 → 타입 하나로 다양한 의미의 객체를 표현하는 훨씬 나은 수단을 제공한다.

## ✅ 태그 달린 클래스를 계층 구조로 바꿔보자.

### 루트 클래스

- area 추상 메서드

### 루트 클래스를 확장한 구체클래스

- Circle
- Rectangle

```java
//루트클래스(추상클래스)
abstract class Figure{
	abstract double area();
}

class Circle extends Figure{
	final double radius;
	
	Circle(double radius) {this.radius = radius;}
	
	@Override double area() {return Math.PI * (radius * radius);}
}

class Rectangle extends Figure{
	final double length;
	final double width;
	
	Rectangle(double kength, double width){
		this.length = length;
		this.width = width;
	}
	
	@Override double area() { return length * width; }
}
```

### 🔶 태그 달린 클래스의 단점을 보완

- 간결 명확
- 관련 없는 데이터 필드를 모두 제거
- 루트 클래스의 코드를 건드리지 않도고 다른 프로그래머들이 독립적으로 계층구조를 확장하고 함께 사용할 수 있다.
- 타입이 의미별로 따로 전재하니 변수의 의미를 명시하거나 제한할 수 있다, 특정 의미만 매개변수로 받을 수 있다.
- 타입 사이의 자연스러운 계층관계를 반영할 수 있어서 유연성을 물론 컴파일 타임 타입 검사 능력을 높여준다는 장점도 있다.

## 🔷 Summary

- 새로운 클래스를 작성하는 데 태그 필드가 등장한다면 태그를 없애고 계층구조로 대체하는 방법을 생각해보자.
- 기존 클래스가 태그 필드를 사용하고 있다면 계층구조로 리팩토링하는 것을 고민해보자.

| 태그 클래스 → 계층구조로 변경하자
