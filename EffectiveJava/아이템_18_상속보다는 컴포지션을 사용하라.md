# ì•„ì´í…œ_18_ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•˜ë¼.
## ì•ˆì „í•œ ìƒì† ë°©ë²•ê³¼ ë¶ˆì•ˆì „í•œ ìƒì† ë°©ë²•
### ì•ˆì „í•œ ìƒì† ë°©ë²•
- ìƒìœ„ í´ë˜ìŠ¤ì™€ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ëª¨ë‘ ê°™ì€ í”„ë¡œê·¸ë˜ë¨¸ê°€ í†µì œí•˜ëŠ” íŒ¨í‚¤ì§€ ì•ˆ. ì¦‰ ìƒìœ„ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ì„ ëª¨ë‘ ì•Œê³  ìˆëŠ” ìƒíƒœ.
- í™•ì¥í•  ëª©ì ìœ¼ë¡œ ì„¤ê³„ + ë¬¸ì„œí™”ê°€ ì˜ ëœ í´ë˜ìŠ¤ì˜ ê²½ìš° ìƒëŒ€ì ìœ¼ë¡œ ì•ˆì „í•¨.

### ë¶ˆì•ˆì „í•œ ìƒì† ë°©ë²•
- ì¼ë°˜ì ì¸ êµ¬ì²´ í´ë˜ìŠ¤ê°€ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì˜ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” ì¼ì€ ìœ„í—˜í•¨.

### â€œì™¸ë¶€ íŒ¨í‚¤ì§€ì— ìˆëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ì§€ ë§ˆë¼.â€
ì¦‰, ë‚¨ì˜ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” ê²ƒì€ ìº¡ìŠí™” ë‚´ë¶€ì— ì˜ì¡´í•˜ëŠ” ê²ƒì´ë¼ ìœ„í—˜í•˜ë‹¤.
| êµ¬ì²´ í´ë˜ìŠ¤(concrete class) = ì§ì ‘ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ê°€ëŠ¥í•œ í´ë˜ìŠ¤ â†’ ëŒ€ë¶€ë¶„ì€ ìƒì†ì„ ê³ ë ¤í•´ì„œ ì„¤ê³„ë˜ì§€ ì•ŠìŒ.

- â‘  ê·¸ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ì´ ë‹¹ì‹ ì—ê²Œ ë³´ì´ì§€ ì•Šê³ 
- â‘¡ ë¬¸ì„œí™”ë„ ì œëŒ€ë¡œ ì•ˆ ë˜ì–´ ìˆê³ 
- â‘¢ ìƒì†ì„ ê³ ë ¤í•´ì„œ ì„¤ê³„ëœ í´ë˜ìŠ¤ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ìƒì†í•˜ë©´ ì‰½ê²Œ ê¹¨ì§„ë‹¤.


## ìƒì†ì€ ìº¡ìŠí™”ë¥¼ ê¹¨íŠ¸ë¦°ë‹¤.
- ìƒìœ„ í´ë˜ìŠ¤ê°€ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠëƒì— ë”°ë¼ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ë™ì‘ì— ì´ìƒì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
- ìƒìœ„ í´ë˜ìŠ¤ëŠ” ë¦´ë¦¬ìŠ¤ë§ˆë‹¤ ë‚´ë¶€ êµ¬í˜„ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ê·¸ ì—¬íŒŒë¡œ ì½”ë“œ í•œ ì¤„ ê±´ë“œë¦¬ì§€ ì•Šì€ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì˜¤ë™ì‘ í•  ìˆ˜ ìˆë‹¤.

â‡’ ê·¸ë˜ì„œ ìƒìœ„ í´ë˜ìŠ¤ ì„¤ê³„ìê°€ í™•ì¥ì„ ì¶©ë¶„íˆ ê³ ë ¤í•˜ê³ (ê³ ë ¤í•˜ì§€ ì•Šê³  ì•„ë‹Œê°€) ë¬¸ì„œí™”ë„ ì œëŒ€ë¡œ í•´ë‘ì§€ ì•Šìœ¼ë©´ í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ìƒìœ„ í´ë˜ìŠ¤ì˜ ë³€í™”ì— ë°œë§ì¶° ìˆ˜ì •ë¼ì•¼ë§Œ í•œë‹¤.

- ìƒì†ì„ ì˜ëª» ì‚¬ìš©í•œ ì˜ˆ

```java
public class InstrumentedHashSet<E> extends HashSet<E> {
	//cì¶”ê°€ëœ ì›ì†Œì˜ ìˆ˜
	private int addCount = 0;
	
	public InstrumentedHashSet(){}
	
	public InstrumentedHashSet(int initCap, float loadFactor){
		super(initCap, loadFactor);
	}
	
	@Override public boolean add(E e){
		addCount++;
		return super.add(e);
	}
	//ì•„ ì´ë ‡ê²Œí•˜ë©´ Collectionì„ êµ¬í˜„í•œ ë§¤ê°œë³€ìˆ˜ë§Œ ì˜¬ ìˆ˜ ìˆëŠ” ê±´ê°€?
	@Override public boolean addAll(Collection<? extends E> c){
		addCount += c.size();
		return super.addAll(c); //??????
	}
	
	public int getAddCount(){
		return addCount;
	}
}

```

â¬‡ï¸Â ì´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì— addAll ë©”ì„œë“œë¡œ ì›ì†Œ 3ê°œë¥¼ ë”í–ˆë‹¤ê³  í•´ë³´ì.

```java
//ì •ì  íŒ©í„¸ ë©”ì„œë“œ List.of(ìë°” 9ì´í›„ ì§€ì›)
	InstrumentedHashSet<String> s = new InstrumentedHashSet<>();
	s.addAll(List.of("í‹±", "íƒíƒ", "í‘"); //ê²°ê³¼ê°€ 3ì´ë¼ê³  ì˜ˆìƒí–ˆê² ì§€ë§Œ 6ì„ ë°˜í™˜í•¨.
```

ë¬¸ì œ : ê²°ê³¼ê°€ 3ì´ë¼ê³  ì˜ˆìƒí–ˆê² ì§€ë§Œ 6ì„ ë°˜í™˜í•¨.

ì›ì¸ : 

- HashSetì˜ addAll ë©”ì„œë“œê°€ add ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ êµ¬í˜„ë˜ì—ˆìŒ.
- ìœ„ì™€ ê°™ì€ ë‚´ë¶€ êµ¬í˜„ ë°©ì‹ì´ HashSet ë¬¸ì„œì— ì“°ì—¬ìˆì§€ ì•ŠìŒ.
- **ğŸ”¥ ì™œ HashSet.addAll()ì´ ìì‹ í´ë˜ìŠ¤ì˜ add()ë¥¼ í˜¸ì¶œí• ê¹Œ?**
    
    ### **ğŸ‘‰ ê²°ë¡ : â€œë™ì  ë””ìŠ¤íŒ¨ì¹˜â€ ë•Œë¬¸.**
    
    > **ìë°”ì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì…ì´ ë¬´ì—‡ì¸ì§€ì— ë”°ë¼ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œê°€ ê²°ì •ëœë‹¤.**
    > 
    - ì»´íŒŒì¼ ì‹œì : HashSet.add() ì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìˆìŒ
    - ì‹¤í–‰ ì‹œì : ì‹¤ì œ ê°ì²´ íƒ€ì…ì´ InstrumentedHashSet â†’ ì¬ì •ì˜ëœ add() í˜¸ì¶œ
    
    ```java
    //ì´ë ‡ê²Œ ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì°¸ì¡°í•˜ë”ë¼ë„ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œëŠ” ìì‹ì˜ add() ì´ë‹¤.
    HashSet<String> set = new InstrumentedHashSet<>();
    set.add("a");
    ```
    
    ### **ğŸ§  ê·¸ë˜ì„œ ì‹¤ì œë¡œ ì¼ì–´ë‚˜ëŠ” íë¦„**
    
    ```java
    s.addAll(List.of("í‹±", "íƒíƒ", "í‘")); //ìš”ì†Œì˜ ê°œìˆ˜ê°€ 3ê°œ, ì¸ë±ìŠ¤ëŠ” 2
    ```
    
    ### **ë‹¨ê³„ë³„ë¡œ ë³´ë©´:**
    
    1. **InstrumentedHashSet.addAll()** í˜¸ì¶œë¨
        
        â†’ addCount += 3;
        
    2. ë‚´ë¶€ì—ì„œëŠ” **HashSet.addAll()**ì„ í˜¸ì¶œí•¨
    3. HashSet.addAll() ë‚´ë¶€ì—ì„œ ê° ì›ì†Œë§ˆë‹¤ add() í˜¸ì¶œ
        
        â†’ í•˜ì§€ë§Œ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì€ **InstrumentedHashSet.add()**
        
    4. ê²°ê³¼ì ìœ¼ë¡œ add()ê°€ **ì´ 3ë²ˆ ë” í˜¸ì¶œ**ë¨
        
        â†’ addCount = 3(ì´ˆê¸°) + 3(ë‚´ë¶€ add í˜¸ì¶œ) = **6**
        
    
    ## **ğŸ¯ ì¦‰, â€œì´ê²Œ ê°€ëŠ¥í•œ ì´ìœ ëŠ”?â€**
    
    **InstrumentedHashSetì´ HashSetì„ ìƒì†í–ˆê³ , add()ë¥¼ ì¬ì •ì˜í–ˆê¸° ë•Œë¬¸ì—, ë¶€ëª¨ì˜ addAll() ë‚´ë¶€ì—ì„œ add()ë¥¼ í˜¸ì¶œí•´ë„ ì‹¤ì œë¡œëŠ” ìì‹ í´ë˜ìŠ¤ì˜ add()ê°€ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì´ë‹¤.**
    
    ## ğŸ”´Â ë¬¸ì œì˜ ë³¸ì§ˆ
    
    **ìƒì†ì„ ê³ ë ¤í•˜ì§€ ì•Šì€ HashSet.addAll() ì„¤ê³„ ë¬¸ì œ**ë‹¤.
    
    HashSetì€:
    
    - addAll() â†’ add()ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŒ (í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´ì²˜ëŸ¼ ë™ì‘)
    - add()ëŠ” override ê°€ëŠ¥í•¨
    
    ë”°ë¼ì„œ ë¶€ëª¨ ë‚´ë¶€ì—ì„œ override ê°€ëŠ¥í•œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬,
    
    ì˜ë„ì¹˜ ì•Šì€ ë¶€ì‘ìš©ì´ ë°œìƒí•œë‹¤.
    
    ì´ê²Œ ë°”ë¡œ Effective Javaê°€ ë§í•˜ëŠ”:
    
    > ìƒì†ì„ ê³ ë ¤í•˜ì§€ ì•Šê³  ì„¤ê³„ëœ í´ë˜ìŠ¤ëŠ” ìƒì†í•˜ë©´ ì‚¬ê³  ë‚œë‹¤
    (Item 19: ìƒì†ì„ ê³ ë ¤í•´ ì„¤ê³„í•˜ê³  ë¬¸ì„œí™”í•˜ë¼. ê·¸ë ‡ì§€ ì•Šì•˜ë‹¤ë©´ ìƒì†ì„ ê¸ˆì§€í•˜ë¼.)
    > 
    

## í•˜ìœ„ í´ë˜ìŠ¤ê°€ ê¹¨ì§€ê¸° ì‰¬ìš´ ì´ìœ 

### ë¬¸ì œì˜ ì›ì¸ : ë©”ì„œë“œ ì¬ì •ì˜

1ï¸âƒ£Â addAll()ë©”ì„œë“œë§Œ ì¬ì •ì˜ í•˜ì§€ ì•Šìœ¼ë©´ ë¬¸ì œ ê³ ì¹  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ?

: ë‹¹ì¥ì€ ì œëŒ€ë¡œ ë™ì‘í•  ì§€ ëª¨ë¥´ì§€ë§Œ, HashSetì˜ addAllì´ add ë©”ì„œë“œë¥¼ ì´ìš©í•´ êµ¬í˜„í–ˆìŒì„ ê°€ì •í•œ í•´ë²•ì´ë¼ëŠ” í•œê³„ë¥¼ ê°€ì§.

â†’ ë‹¤ë¥¸ ë¶€ë¶„ì„ ì‚¬ìš©í•˜ëŠ” â€˜ìê¸°ì‚¬ìš©â€™ ì—¬ë¶€ëŠ” í•´ë‹¹í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ ë°©ì‹ì— í•´ë‹¹ë¨.

â‡’ ì´ëŸ° ê°€ì •ì— ê¸°ëŒ„ InstrumentedHashSetì€ ê¹¨ì§€ê¸° ì‰½ë‹¤.

2ï¸âƒ£Â addAll ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ ì‹ìœ¼ë¡œ ì¬ì •ì˜í•  ìˆ˜ë„ ìˆìŒ.

ì£¼ì–´ì§„ ì»¬ë ‰ì…˜ì„ ìˆœíšŒí•˜ë©° ì›ì†Œ í•˜ë‚˜ë‹¹ add ë©”ì„œë“œë¥¼ í•œ ë²ˆë§Œ í˜¸ì¶œí•˜ëŠ” ê²ƒ. 

â†’ HashSetì˜ addAllì„ ë” ì´ìƒ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ â†’ addAllì´ addë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ì™€ ìƒê´€ ì—†ì´ ê²°ê³¼ê°€ ì˜³ë‹¤ëŠ” ì ì—ì„œ ë‚˜ì€ í•´ë²•

but, ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ë™ì‘ì„ ë‹¤ì‹œ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì€ ì–´ë ¤ì›€

- ì‹œê°„ ë¹„ìš© + ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„±ì´ ë†’ìŒ.
- ì„±ëŠ¥ì„ ë–¨ì–´ëœ¨ë¦´ ìˆ˜ ìˆìŒ.

---

í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ë”ë¼ë„ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•˜ëŠ” ëŒ€ì‹  ìƒˆë¡œìš´ ë©”ì„œë“œë¥¼ ì¶”ê°€í•œë‹¤ë©´?

â†’ ìœ„í—˜ ìš”ì†Œ ë°œìƒ ê°€ëŠ¥ì„± ìˆìŒ.

ì˜ˆ) í•˜ìœ„ í´ë˜ìŠ¤ì— ì¶”ê°€í•œ ë©”ì„œë“œì™€ ì‹œê·¸ë‹ˆì²˜ê°€ ê°™ê³  ë°˜í™˜ íƒ€ì…ì€ ë‹¤ë¥¸ ê²½ìš° 

- ì»´íŒŒì¼ ì¡°ì°¨ ë˜ì§€ ì•ŠìŒ.
- ë°˜í™˜ íƒ€ì… ë§ˆì € ê°™ë‹¤ë©´, ìƒìœ„ í´ë˜ìŠ¤ì˜ ìƒˆ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•œ ê¼´ì„
â†’ ìœ„ì—ì„œ ë°œìƒí•œ ë¬¸ì œì™€ ê°™ì€ ìƒí™©.
- ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œëŠ” ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œê°€ ìš”êµ¬í•˜ëŠ” ê·œì•½ì„ ë§Œì¡±í•˜ì§€ ëª»í•  ê°€ëŠ¥ì„±ì´ í¬ë‹¤.

## í•´ê²°ë°©ë²•

### Composition (êµ¬ì„±) ì„¤ê³„ ë°©ë²• ì œì•ˆ

> ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ëŒ€ì‹ , ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  privateí•„ë“œë¡œ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê²Œ í•˜ì.
> 

### ì „ë‹¬(forwarding) ë°©ì‹

- ìƒˆ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë“¤ì€ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ëŒ€ì‘í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.
- ìƒˆ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë“¤ì„ â€œì „ë‹¬ ë©”ì„œë“œâ€ë¼ ë¶€ë¥¸ë‹¤.

â†’ ì´ ê²°ê³¼ ìƒˆë¡œìš´ í´ë˜ìŠ¤ëŠ” ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ ë°©ì‹ì—ì„œ ë²—ì–´ë‚˜ë©°, ì‹¬ì§€ì–´ ê¸°ì¡´ í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ë©”ì„œë“œê°€ ì¶”ê°€ë˜ë”ë¼ë„ ì „í˜€ ì˜í–¥ ë°›ì§€ ì•ŠìŒ.

êµ¬ì²´ì ì¸ ì˜ˆ) ë˜í¼ í´ë˜ìŠ¤ - ìƒì† ëŒ€ì‹  ì»´í¬ì§€ì…˜ ì‚¬ìš©

```java
public class InstrumentedSet<E> extends ForwardingSet<E>{
	private int addCount = 0;
	
	public InstrumentedSet(Set<E> s){
		super(s);
	}
	@Override public boolean add(E e){
		addCount++;
		return super.add(e);
	}
	@Override public boolean addAll(Collection<? extends E> c) {
		addCount += c.size();
		return super.addAll(c);
	}
	public int getAddCount() {
		return addCount;
	}
}
```

- InstrumentedSetì€ HashSetì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì •ì˜í•œ Set ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í•´ ì„¤ê³„ë˜ì–´ ê²¬ê³ í•˜ê³  ì•„ì£¼ ìœ ì—°í•¨.
- Set ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
- Setì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ” ìƒì„±ìë¥¼ í•˜ë‚˜ ì œê³µí•¨.
- ì„ì˜ì˜ Setì— ê³„ì¸¡ ê¸°ëŠ¥ì„ ë§ì”Œì›Œ ìƒˆë¡œìš´ Setìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì´ ì´ í´ë˜ìŠ¤ì˜ í•µì‹¬ì„.
- ì–´ë–¤ Set êµ¬í˜„ì²´ë¼ë„ ê³„ì¸¡í•  ìˆ˜ ìˆìœ¼ë©°, ê¸°ì¡´ ìƒì„±ìë“¤ê³¼ë„ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.

ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì „ë‹¬ í´ë˜ìŠ¤

```java
public class ForwardingSet<E> implements Set<E> {
	private final Set<E> s;
	public ForwardingSet(Set<E> s) { this.s = s; }
	
	public void clear() { s.clearO; }
	public boolean contains(Object o) { return s.contains(o); }
	public boolean isEmpty() { return s.isEmptyO; }
	public int size() { return s.size(); }
	public Iterator<E> iterator() { return s.iterator(); }
	public boolean add(E e) { return s.add(e); }
	public boolean remove(Object o) { return s.remove(o); }
	public boolean containsAll(Collection<?> c) { return s.containsAll(c); }
	
	public boolean addAll(Collection<? extends E> c)
	{ return s.addAll(c); }
	public boolean removeAllã€Collection<?> c)
	{ return s.removeAll(c); }
	public boolean retainAll(Collection<?> c)
	{ return s.retainAll(c); }
	public Object[] toArray() { return s.toArray(); }
	public <T> T[] toArray(T[] a) { return s.toArray(a); }
	@0verride public boolean equals(Object o){ return s.equals(o); }
	@Override public int hashCode() { return s.hashCode();} 
	@Override public String toString() { return s.toString(); }
}
```

### ë˜í¼í´ë˜ìŠ¤

InstrumentedSetì„ ì´ìš©í•˜ë©´ ëŒ€ìƒ Set ì¸ìŠ¤í„´ìŠ¤ë¥¼ íŠ¹ì • ì¡°ê±´í•˜ì—ì„œë§Œ ì„ì‹œë¡œ ê³„ì¸¡í•  ìˆ˜ ìˆë‹¤.

```java
Set<Instant> times = new InstrumentedSet<>(new TreeSet<>(cmp));
Set<E> s = new InstrumentedSet<>(new HashSet<>(INIT_CAPACITY));
```

> InstrumentedSetì€ â€œìƒì†â€ì´ ì•„ë‹ˆë¼ â€œì»´í¬ì§€ì…˜(ìœ„ì„)â€ êµ¬ì¡°ë¼ì„œ, 
ë‚´ë¶€ì— ì–´ë–¤ Setì„ ê°ì‹¸ëŠëƒì— ë”°ë¼ ê·¸ Setì˜ ë™ì‘ì„ ì„ì‹œë¡œ ê³„ì¸¡(ê¸°ë¡)í•  ìˆ˜ ìˆë‹¤.
> 
- TreeSetì„ ê°ì‹¸ë©´ â†’ TreeSetì˜ ë™ì‘ì„ ê³„ì¸¡
- HashSetì„ ê°ì‹¸ë©´ â†’ HashSetì˜ ë™ì‘ì„ ê³„ì¸¡
- LinkedHashSetì„ ê°ì‹¸ë©´ â†’ LinkedHashSetì˜ ë™ì‘ì„ ê³„ì¸¡

â‡’ ì´ë ‡ê²Œ **ì›í•˜ëŠ” Setì„ ì„ íƒí•´ì„œ â€˜ì„ì‹œë¡œâ€™ ê³„ì¸¡ ê°€ëŠ¥í•œ** êµ¬ì¡°ê°€ ë¨.

ë˜í¼í´ë˜ìŠ¤ ì‚¬ìš© ì‹œ, ì£¼ì˜í•  ì 

ì½œë°± í”„ë ˆì„ì›Œí¬ì™€ëŠ” ì–´ìš¸ë¦¬ì§€ ì•ŠìŒ. 

### ì½œë°± í”„ë ˆì„ì›Œí¬

> ìê¸° ìì‹ ì˜ ì°¸ì¡°ë¥¼ ë‹¤ë¥¸ ê°ì²´ì— ë„˜ê²¨ì„œ ë‹¤ìŒ í˜¸ì¶œ(ì½œë°±) ë•Œ ì‚¬ìš©í•˜ë„ë¡ í•¨.
> 

### SELF ë¬¸ì œ

> ë‚´ë¶€ ê°ì²´ëŠ” ìì‹ ì„ ê°ì‹¸ê³  ìˆëŠ” ë˜í¼ì˜ ì¡´ì¬ë¥¼ ëª¨ë¥´ë‹ˆ ëŒ€ì‹  ìì‹ (this)ì˜
ì°¸ì¡°ë¥¼ ë„˜ê¸°ê³ , ì½œë°± ë•ŒëŠ” ë˜í¼ê°€ ì•„ë‹Œ ë‚´ë¶€ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ê²Œ ëœë‹¤.
> 

ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì „ë‹¬ í´ë˜ìŠ¤(ì½”ë“œ 18-3)ë¥¼ ì¸í„°í˜ì´ìŠ¤ë‹¹ í•˜ë‚˜ì”©ë§Œ ë§Œë“¤ì–´ë‘ë©´ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ë§ì”Œìš°ëŠ” ì „ë‹¬ í´ë˜ìŠ¤ë“¤ì„ ì•„ì£¼ ì†ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

**ğŸ“ŒÂ Guava ForwardingSet ì˜ˆì‹œ**

ex. êµ¬ì•„ë°” â†’ ëª¨ë“  ì»¬ë ˆì…˜ ì¸í„°í˜ì´ìŠ¤ìš© ì „ë‹¬ ë©”ì„œë“œë¥¼ ì „ë¶€ êµ¬í˜„í•´ë‘ì—ˆìŒ.

> â€œêµ¬ì•„ë°”ëŠ” ForwardingSet, ForwardingList ê°™ì€ í´ë˜ìŠ¤ë¥¼ ì œê³µí•´ â€˜ëª¨ë“  ì»¬ë ‰ì…˜ ì¸í„°í˜ì´ìŠ¤ì˜ ì „ë‹¬ ë©”ì„œë“œâ€™ë¥¼ ìë™ êµ¬í˜„í•´ë‘ì—ˆë‹¤.â€
> 

ğŸ”¹ Effective JavaëŠ” â€œìƒì†í•˜ì§€ ë§ê³  ìœ„ì„(ì»´í¬ì§€ì…˜)ì„ ì¨ë¼â€ ë¼ê³  í•¨.
ğŸ”¹ í•˜ì§€ë§Œ ìë°” ê¸°ë³¸ ì»¬ë ‰ì…˜ì€ ìœ„ì„ìš© ë² ì´ìŠ¤ í´ë˜ìŠ¤ë¥¼ ì œê³µí•˜ì§€ ì•ŠìŒ.
ğŸ”¹ êµ¬ì•„ë°”ëŠ” ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ForwardingXXX í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ë‘ .
ğŸ”¹ ê°œë°œìëŠ” overrideí•˜ë ¤ëŠ” ëª‡ ê°œì˜ ë©”ì„œë“œë§Œ ì¬ì •ì˜í•˜ë©´ ë¨!
ğŸ”¹ ë‚˜ë¨¸ì§€ëŠ” ëª¨ë‘ delegate()ì—ê²Œ ìë™ ìœ„ì„ë¨.
ğŸ”¹ ê·¸ë˜ì„œ êµ¬ì•„ë°”ëŠ” â€œëª¨ë“  ì»¬ë ‰ì…˜ ì¸í„°í˜ì´ìŠ¤ìš© ì „ë‹¬ ë©”ì„œë“œë¥¼ ì „ë¶€ êµ¬í˜„í•´ë‘ â€ ì´ë¼ê³  ë§í•˜ëŠ” ê²ƒ.

```java
import com.google.common.collect.ForwardingSet;
import java.util.Set;

public class InstrumentedSet<E> extends ForwardingSet<E> {

    private final Set<E> delegate;  // ì‹¤ì œ ë™ì‘ì€ ì—¬ê¸°ì— ìœ„ì„
    private int addCount = 0;

    public InstrumentedSet(Set<E> delegate) {
        this.delegate = delegate;
    }

    @Override
    protected Set<E> delegate() {
        return delegate;
    }

    @Override
    public boolean add(E element) {
        addCount++;
        return super.add(element);  // ForwardingSetì´ delegate.add(...)ë¡œ ìœ„ì„í•´ì¤Œ
    }

    @Override
    public boolean addAll(Collection<? extends E> elements) {
        addCount += elements.size();
        return super.addAll(elements);
    }

    public int getAddCount() {
        return addCount;
    }
}
```

**ForwardingSetì´ ì´ë¯¸ Setì˜ ëª¨ë“  ë©”ì„œë“œë¥¼ ìœ„ì„í•˜ë„ë¡ êµ¬í˜„í•´ë‘ **

```java
//**ForwardingSet**
public abstract class ForwardingSet<E> extends ForwardingCollection<E> implements Set<E> {
    @Override
    protected abstract Set<E> delegate();
}
```

ForwardingCollectionì´ ê±°ì˜ ëª¨ë“  ë©”ì„œë“œë¥¼ ì´ë ‡ê²Œ êµ¬í˜„í•´ë‘ 

```java
public abstract class ForwardingCollection<E> implements Collection<E> {

    protected abstract Collection<E> delegate();

    public int size() {
        return delegate().size();
    }

    public boolean isEmpty() {
        return delegate().isEmpty();
    }

    public boolean contains(Object object) {
        return delegate().contains(object);
    }

    public boolean add(E element) {
        return delegate().add(element);
    }

    // â€¦
}
```

â†’ **ëª¨ë“  Collection ë©”ì„œë“œë¥¼ ì•Œì•„ì„œ delegate()ì—ê²Œ ìœ„ì„í•˜ë„ë¡ ë§Œë“¤ì–´ë†“ìŒ**

ê·¸ë˜ì„œ ê°œë°œìëŠ”:

- override í•˜ê³  ì‹¶ì€ ë©”ì„œë“œë§Œ override
- ë‚˜ë¨¸ì§€ ìˆ˜ì‹­ ê°œì˜ ë©”ì„œë“œëŠ” ForwardingSetì´ ìë™ ìœ„ì„

---

## ìƒì†ì€ â€œì§„ì§œ í•˜ìœ„ íƒ€ì…â€ì¼ ê²½ìš°ì—ë§Œ ì‚¬ìš©í•˜ì

ìƒì†ì€ ë°˜ë“œì‹œ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìƒìœ„ í´ë˜ìŠ¤ì˜ ì§„ì§œ í•˜ìœ„ íƒ€ì…(is-a ê´€ê³„)ì¸ ìƒí™©ì—ì„œë§Œ ì“°ì—¬ì•¼ í•œë‹¤.

### is-a ê´€ê³„ê°€ ì•„ë‹Œê²½ìš°,

- AëŠ” êµ¬í˜„í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì¼ ë¿ì„.
- Aë¥¼ private ì¸ìŠ¤í„´ìŠ¤ë¡œ ë‘ê³ , Aì™€ëŠ” ë‹¤ë¥¸ API ë¥¼ ì œê³µí•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ.

ex. Stackê³¼ Vectorì˜ ê´€ê³„

## Summary

ìƒì†ì€ ê°•ë ¥í•˜ì§€ë§Œ ìº¡ìŠí™”ë¥¼ í•´ì¹œë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.

â‡’ ìƒì†ì˜ ì·¨ì•½ì ì„ í”¼í•˜ë ¤ë©´ ìƒì† ëŒ€ì‹  ì»´í¬ì§€ì…˜ê³¼ ì „ë‹¬ì„
ì‚¬ìš©í•˜ì. (íŠ¹íˆ ë˜í¼ í´ë˜ìŠ¤ë¡œ êµ¬í˜„í•  ì¸í„°í˜ì´ìŠ¤ê°€ ìˆëŠ” ê²½ìš°)
